
### 内存模型

#### 1 作用域安全的构造函数
我们在构造对象的时候要是忘记 new 的时候,this是指向window,所以 Person('Person')的name会指向 window <br/>
这时候我们可以在构造器里面进行保护,this的类型不对就新建对象进行保护
```
function Person(name) {
    this.name = name;
}
var p1 = Person('Person');
log(window.name);

function Person2(name) {
    if (this instanceof Person2) {
        this.name = name;
    } else {
        return new Person2(name);
    }
}

var p2 = Person2('Person');
log(p2.name);

```

#### 2 惰性函数
在新建对象的时候,我们如果希望函数是唯一的话,可以使用惰性函数,原理是重写函数,比如createSingleton
```
createSingleton = function () {
    let data = new Date();
    console.log('create date');
    createSingleton = function () {
        return data;
    }
    return createSingleton();
}

log(createSingleton());
log(createSingleton());
log(createSingleton());

//log create date 只会输出一次
```


